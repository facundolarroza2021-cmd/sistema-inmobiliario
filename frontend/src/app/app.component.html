@if (usuarioLogueado()) {
  <mat-sidenav-container class="sidenav-container">

    <mat-sidenav #sidenav mode="side" [opened]="menuAbierto" class="sidenav">
      
      <div class="sidenav-header">
        <mat-icon style="transform: scale(1.5);">business</mat-icon>
        <h2>Inmobiliaria</h2>
      </div>
  
      <mat-nav-list>
        
        <a mat-list-item routerLink="/dashboard" routerLinkActive="active-link">
          <mat-icon matListItemIcon>dashboard</mat-icon>
          <span matListItemTitle>Inicio</span>
        </a>
  
        <mat-divider></mat-divider>
        <div mat-subheader>Gesti贸n</div>
  
        <a mat-list-item routerLink="/propietarios" routerLinkActive="active-link">
          <mat-icon matListItemIcon>person</mat-icon>
          <span matListItemTitle>Propietarios</span>
        </a>
  
        <a mat-list-item routerLink="/propiedades" routerLinkActive="active-link">
          <mat-icon matListItemIcon>home_work</mat-icon>
          <span matListItemTitle>Propiedades</span>
        </a>
  
        <a mat-list-item routerLink="/inquilinos" routerLinkActive="active-link">
          <mat-icon matListItemIcon>group</mat-icon>
          <span matListItemTitle>Inquilinos</span>
        </a>
  
        <mat-divider></mat-divider>
        <div mat-subheader>Operaciones</div>
  
        <a mat-list-item routerLink="/contratos" routerLinkActive="active-link">
          <mat-icon matListItemIcon>assignment</mat-icon>
          <span matListItemTitle>Contratos</span>
        </a>
  
        <a mat-list-item routerLink="/cobranzas" routerLinkActive="active-link">
          <mat-icon matListItemIcon>point_of_sale</mat-icon>
          <span matListItemTitle>Caja / Cobros</span>
        </a>
  
        <a mat-list-item routerLink="/liquidaciones" routerLinkActive="active-link">
          <mat-icon matListItemIcon>request_quote</mat-icon>
          <span matListItemTitle>Liquidaciones</span>
        </a>
        @if (authService.hasRole(['admin'])) {
          <mat-divider></mat-divider>
          <div mat-subheader>Administraci贸n</div>
        
          <a mat-list-item routerLink="/usuarios" routerLinkActive="active-link">
            <mat-icon matListItemIcon>manage_accounts</mat-icon>
            <span matListItemTitle>Usuarios</span>
          </a>
        }
  
      </mat-nav-list>
    </mat-sidenav>
  
  
    <mat-sidenav-content>
      
      <mat-toolbar color="primary" class="top-toolbar">
        <button mat-icon-button (click)="menuAbierto = !menuAbierto">
          <mat-icon>menu</mat-icon>
        </button>
        
        <span>Sistema de Gesti贸n</span>
        
        <span class="spacer"></span>
        
        <div style="font-size: 14px; margin-right: 15px; text-align: right; line-height: 1.2;">
            <div>{{ usuarioLogueado()?.name }}</div>
            <div style="font-size: 11px; opacity: 0.8; text-transform: uppercase;">
                {{ usuarioLogueado()?.role }}
            </div>
        </div>

        <button mat-icon-button (click)="logout()" title="Cerrar Sesi贸n">
          <mat-icon>logout</mat-icon>
        </button>
      </mat-toolbar>
  
      <div class="content-padding">
        <router-outlet></router-outlet>
      </div>
  
    </mat-sidenav-content>
  </mat-sidenav-container>
  

} @else {
  <router-outlet></router-outlet>
}